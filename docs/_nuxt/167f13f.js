(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{854:function(t,e,o){"use strict";o.r(e);o(85),o(27),o(134),o(138),o(23),o(69),o(420),o(28),o(18),o(98),o(100);var r=o(816),n=o(16),l=function(){return l=Object.assign||function(t){for(var s,i=1,e=arguments.length;i<e;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},l.apply(this,arguments)},c=function(t,e,o,r){return new(o||(o=Promise))((function(n,l){function c(t){try{d(r.next(t))}catch(t){l(t)}}function h(t){try{d(r.throw(t))}catch(t){l(t)}}function d(t){var e;t.done?n(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(c,h)}d((r=r.apply(t,e||[])).next())}))},h=function(t,body){var e,o,r,g,n={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return g={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function l(l){return function(c){return function(l){if(e)throw new TypeError("Generator is already executing.");for(;g&&(g=0,l[0]&&(n=0)),n;)try{if(e=1,o&&(r=2&l[0]?o.return:l[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,l[1])).done)return r;switch(o=0,r&&(l=[2&l[0],r.value]),l[0]){case 0:case 1:r=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,o=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(!(r=n.trys,(r=r.length>0&&r[r.length-1])||6!==l[0]&&2!==l[0])){n=0;continue}if(3===l[0]&&(!r||l[1]>r[0]&&l[1]<r[3])){n.label=l[1];break}if(6===l[0]&&n.label<r[1]){n.label=r[1],r=l;break}if(r&&n.label<r[2]){n.label=r[2],n.ops.push(l);break}r[2]&&n.ops.pop(),n.trys.pop();continue}l=body.call(t,n)}catch(t){l=[6,t],o=0}finally{e=r=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}},d=n.default.extend({name:"ShippingStatistic",components:{DashboardWidget:r.default},layout:"DashboardLayout",data:function(){return{dashboardList:[],shipData:[]}},computed:{flightRoutes:function(){for(var t=[],i=0;i<20;i++)t.push({coords:[[180*Math.random()-90,90*Math.random()-45],[240*Math.random()-90,120*Math.random()-45]]});return t},loading:function(){return this.$store.getters["dashboard/getLoading"]},dataSource:function(){var t=this.$store.getters["dashboard/getShipCount"],e={series:[]};return t&&Object.keys(t).length>0?e.series=[{data:Object.keys(t).map((function(e){return{name:e,value:t[e].data1}}))}]:e.series=[],{shipCount:e,shipMap:{grid:{left:"5%",right:"5%"},geo:{map:"world",roam:!0,label:{emphasis:{show:!1}},silent:!0,itemStyle:{normal:{areaColor:"lightgray",borderColor:"gray"},emphasis:{areaColor:"gray"}}},series:[{name:"World Population",type:"map",mapType:"world",roam:!0,itemStyle:{emphasis:{label:{show:!0}}},data:[{name:"China",value:138e7},{name:"India",value:131e7},{name:"United States",value:324e6},{name:"Indonesia",value:263e6},{name:"Brazil",value:207e6}]},{type:"lines",coordinateSystem:"geo",data:this.flightRoutes,large:!0,lineStyle:{normal:{color:"#76ffcf",width:1,opacity:.8,curveness:.2}}}]},portMap:{geo:{center:[120.2885,22.6163],zoom:30,map:"kaoMap",roam:!0,label:{emphasis:{show:!1}},silent:!0,itemStyle:{normal:{areaColor:"lightgray",borderColor:"gray"},emphasis:{areaColor:"gray"}}},series:[{type:"map",map:"kaoMap",geoIndex:0,roam:!0,emphasis:{label:{show:!0}}},{name:"船隻分布",type:"scatter",coordinateSystem:"geo",data:this.shipData,symbol:"path://M192 32c0-17.7 14.3-32 32-32H352c17.7 0 32 14.3 32 32V64h48c26.5 0 48 21.5 48 48V240l44.4 14.8c23.1 7.7 29.5 37.5 11.5 53.9l-101 92.6c-16.2 9.4-34.7 15.1-50.9 15.1c-19.6 0-40.8-7.7-59.2-20.3c-22.1-15.5-51.6-15.5-73.7 0c-17.1 11.8-38 20.3-59.2 20.3c-16.2 0-34.7-5.7-50.9-15.1l-101-92.6c-18-16.5-11.6-46.2 11.5-53.9L96 240V112c0-26.5 21.5-48 48-48h48V32zM160 218.7l107.8-35.9c13.1-4.4 27.3-4.4 40.5 0L416 218.7V128H160v90.7zM306.5 421.9C329 437.4 356.5 448 384 448c26.9 0 55.4-10.8 77.4-26.1l0 0c11.9-8.5 28.1-7.8 39.2 1.7c14.4 11.9 32.5 21 50.6 25.2c17.2 4 27.9 21.2 23.9 38.4s-21.2 27.9-38.4 23.9c-24.5-5.7-44.9-16.5-58.2-25C449.5 501.7 417 512 384 512c-31.9 0-60.6-9.9-80.4-18.9c-5.8-2.7-11.1-5.3-15.6-7.7c-4.5 2.4-9.7 5.1-15.6 7.7c-19.8 9-48.5 18.9-80.4 18.9c-33 0-65.5-10.3-94.5-25.8c-13.4 8.4-33.7 19.3-58.2 25c-17.2 4-34.4-6.7-38.4-23.9s6.7-34.4 23.9-38.4c18.1-4.2 36.2-13.3 50.6-25.2c11.1-9.4 27.3-10.1 39.2-1.7l0 0C136.7 437.2 165.1 448 192 448c27.5 0 55-10.6 77.5-26.1c11.1-7.9 25.9-7.9 37 0z",symbolSize:20,label:{normal:{formatter:"{b}",position:"right",show:!1},emphasis:{show:!0}}}]}}}},created:function(){this.onLoadDashboard(this.$route.path),this.onLoadShipTrace()},methods:{onLoadDashboard:function(){return c(this,arguments,void 0,(function(path){var t=this;return void 0===path&&(path=""),h(this,(function(e){return this.$fire.database.ref("widgets".concat(path)).once("value",(function(e){var data=e.val();t.dashboardList=data.filter((function(t){return t})).map((function(t,e){return l(l({},t),{i:e})}))})),[2]}))}))},onLoadShipTrace:function(){return c(this,void 0,void 0,(function(){var t=this;return h(this,(function(e){return this.$fire.database.ref("shipsTrace").once("value",(function(e){var data=e.val();t.shipData=data.filter((function(t){return t})).map((function(t){for(var e,o,r="#",i=0;i<6;i++)r+="0123456789ABCDEF"[Math.floor(16*Math.random())];return l(l({},t),{name:t.pbgName,value:[Number((null===(e=null==t?void 0:t.location)||void 0===e?void 0:e.pointAX)||0)-.028,Number((null===(o=null==t?void 0:t.location)||void 0===o?void 0:o.pointAY)||0)],itemStyle:{color:r}})}))})),[2]}))}))}}}),f=d,m=o(124),component=Object(m.a)(f,(function(){var t=this,e=t._self._c;t._self._setupProxy;return e("grid-layout",{attrs:{show:!t.loading,layout:t.dashboardList,"col-num":5,"row-num":12,"row-height":150,"is-draggable":!0,"is-resizable":!0,"vertical-compact":!0,"use-css-transforms":!0}},t._l(t.dashboardList,(function(o){return e("dashboard-widget",{key:o.name,attrs:{item:o,"data-source":t.dataSource}})})),1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{DashboardWidget:o(816).default})}}]);