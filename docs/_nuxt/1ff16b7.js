(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{847:function(t,e,r){"use strict";r.r(e);r(85),r(27),r(134),r(138),r(23),r(69),r(78),r(222),r(28),r(18),r(98),r(25),r(100);var n=r(816),o=r(16),c=function(){return c=Object.assign||function(t){for(var s,i=1,e=arguments.length;i<e;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},c.apply(this,arguments)},d=function(t,e,r,n){return new(r||(r=Promise))((function(o,c){function d(t){try{h(n.next(t))}catch(t){c(t)}}function l(t){try{h(n.throw(t))}catch(t){c(t)}}function h(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(d,l)}h((n=n.apply(t,e||[])).next())}))},l=function(t,body){var e,r,n,g,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return g={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function c(c){return function(d){return function(c){if(e)throw new TypeError("Generator is already executing.");for(;g&&(g=0,c[0]&&(o=0)),o;)try{if(e=1,r&&(n=2&c[0]?r.return:c[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,c[1])).done)return n;switch(r=0,n&&(c=[2&c[0],n.value]),c[0]){case 0:case 1:n=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(n=o.trys,(n=n.length>0&&n[n.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!n||c[1]>n[0]&&c[1]<n[3])){o.label=c[1];break}if(6===c[0]&&o.label<n[1]){o.label=n[1],n=c;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(c);break}n[2]&&o.ops.pop(),o.trys.pop();continue}c=body.call(t,o)}catch(t){c=[6,t],r=0}finally{e=n=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,d])}}},h=o.default.extend({name:"Dashboard",components:{DashboardWidget:n.default},layout:"DashboardLayout",data:function(){return{dashboardList:[]}},computed:{loading:function(){return this.$store.getters["dashboard/getLoading"]},dataSource:function(){var t=this.$store.getters["dashboard/getLoader"],e=this.$store.getters["dashboard/getLoaderHistory"],summary=this.$store.getters["dashboard/getLoaderSummary"],r=this.$store.getters["dashboard/getLoaderByHarbor"],n=this.$store.getters["dashboard/getProductGrowth"],legend={orient:"horizontal",textStyle:{color:"white"},data:[]},o={type:"value",axisLabel:{formatter:function(t){return t>=1e3?"".concat(t/1e3,"k"):t}}},d={series:[]};t&&Object.keys(t).length>0&&(d.series=[{data:Object.keys(t).map((function(e){return{name:e,value:t[e].data1}}))}]),console.log(e);var l={xAxis:{type:"category",boundaryGap:!1,data:Object.keys(e)},yAxis:o,series:[]};Object.keys(e).forEach((function(t){Object.keys(e[t]).forEach((function(r,n){l.series[n]||(l.series[n]={name:r,data:[]}),l.series[n].data.push(e[t][r].data1)}))}));var h={legend:c(c({},legend),{data:["名稱","同期增減","成長率"]}),series:[]};Object.keys(summary).forEach((function(t,e){h.series[e]={name:t,data:[summary[t].current,summary[t].change,summary[t].growthRate]}}));var f={series:[]};Object.keys(n).forEach((function(t,e){f.series[e]={name:t,data:[n[t].current,n[t].change,n[t].growthRate]}}));var y={legend:c(c({},legend),{data:["貨品名稱","同期成長率","同期增長量"]}),series:f.series.sort((function(a,b){return a.data[0]-b.data[0]})).slice(0,3)},w={legend:c(c({},legend),{data:["貨品名稱","同期成長率","同期增長量"]}),series:f.series.sort((function(a,b){return b.data[0]-a.data[0]})).slice(0,3)},m=Object.keys(r),v={legend:c(c({},legend),{data:m.length>0?Object.keys(r[m[0]]):[]}),xAxis:[{type:"category",data:m}],yAxis:o,series:[]};return m.forEach((function(t){Object.keys(r[t]).forEach((function(e,n){v.series[n]||(v.series[n]={type:"bar",name:e,data:[]}),v.series[n].data.push(r[t][e])}))})),{topTenLoader:d,topTenLoaderHistory:l,loaderSummary:h,loaderByHarbor:v,top3ProductGrowth:y,last3ProductGrowth:w}}},created:function(){this.onLoadDashboard(this.$route.path)},methods:{onLoadDashboard:function(){return d(this,arguments,void 0,(function(path){var t=this;return void 0===path&&(path=""),l(this,(function(e){return this.$fire.database.ref("widgets".concat(path)).once("value",(function(e){var data=e.val();t.dashboardList=data.filter((function(t){return t})).map((function(t,e){return c(c({},t),{i:e})}))})),[2]}))}))}}}),f=h,y=r(124),component=Object(y.a)(f,(function(){var t=this,e=t._self._c;t._self._setupProxy;return e("grid-layout",{attrs:{show:!t.loading,layout:t.dashboardList,"col-num":4,"row-num":12,"row-height":150,"is-draggable":"","is-resizable":"","vertical-compact":"","use-css-transforms":""}},t._l(t.dashboardList,(function(r){return e("dashboard-widget",{key:r.name,attrs:{item:r,"data-source":t.dataSource}})})),1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{DashboardWidget:r(816).default})}}]);